/* ProfileMenu.css
   Styled to match the app's glass/panel look.
   Uses --mx / --my for subtle pointer-follow lighting when available.
*/

.profile-menu {
  position: relative;
  display: inline-block;
  font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
}

/* -------------------------
   Trigger button (compact)
   ------------------------- */
.profile-button {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border-radius: 10px;
  background: linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.005));
  border: 1px solid rgba(255,255,255,0.04);
  color: #eaf4ff;
  cursor: pointer;
  transition: transform 200ms cubic-bezier(.2,.9,.2,1), box-shadow 200ms ease, background 200ms ease;
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  position: relative;
  z-index: 1;
}

/* tiny interactive glow that appears on hover */
.profile-button::before {
  content: "";
  position: absolute;
  left: -30%;
  top: -30%;
  width: 160%;
  height: 160%;
  pointer-events: none;
  background: radial-gradient(240px circle at var(--mx,50%) var(--my,50%),
    rgba(124,92,255,0.08),
    rgba(0,210,255,0.03) 18%,
    transparent 36%);
  mix-blend-mode: screen;
  opacity: 0;
  transition: opacity 220ms ease;
  z-index: 0;
}

.profile-button:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 30px rgba(124,92,255,0.06);
  background: linear-gradient(180deg, rgba(255,255,255,0.015), rgba(255,255,255,0.006));
}

.profile-button:hover::before {
  opacity: 1;
}

/* avatar (small) */
.avatar {
  width: 34px;
  height: 34px;
  border-radius: 999px;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(180deg,#276fbf,#1f4e8a);
  color: #fff;
  font-weight: 600;
  font-size: 14px;
  flex-shrink: 0;
  box-shadow: 0 4px 12px rgba(2,6,23,0.35);
}

/* profile info in the button */
.profile-info {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  min-width: 120px;
}

.profile-name {
  font-size: 13px;
  font-weight: 600;
  color: #fff;
}

.profile-points {
  font-size: 12px;
  color: rgba(255,255,255,0.7);
}

/* caret icon spacing */
.dropdown-icon {
  margin-left: 6px;
  color: rgba(255,255,255,0.9);
}

/* -------------------------
   Dropdown
   ------------------------- */
.profile-dropdown {
  position: absolute;
  right: 0;
  top: calc(100% + 8px);
  min-width: 280px;
  background: linear-gradient(180deg, #ffffff, #fbfdff);
  border-radius: 12px;
  padding: 14px;
  box-shadow: 0 18px 48px rgba(2,6,23,0.12);
  z-index: 1200;
  transform-origin: top right;
  animation: dropdownIn 220ms cubic-bezier(.2,.9,.2,1);
  color: #0e1724;
}

/* a small, subtle border around the dropdown */
.profile-dropdown {
  border: 1px solid rgba(9,14,20,0.04);
}

@keyframes dropdownIn {
  from { opacity: 0; transform: translateY(-8px) scale(0.995); }
  to   { opacity: 1; transform: translateY(0) scale(1); }
}

/* header inside dropdown */
.profile-header {
  display: flex;
  align-items: center;
  gap: 10px;
  margin-bottom: 8px;
}

.profile-details strong {
  display: block;
  font-size: 14px;
  color: #071427;
}

.profile-details span {
  font-size: 13px;
  color: #5b6470;
}

/* larger avatar for dropdown */
.avatar.large {
  width: 46px;
  height: 46px;
  font-size: 18px;
  font-weight: 700;
  background: linear-gradient(180deg,#2b6cb0,#245a96);
}

/* sections inside dropdown */
.profile-section {
  margin-top: 12px;
}

.section-title {
  font-size: 12px;
  color: #7b8794;
  margin-bottom: 6px;
}

.points-value {
  font-size: 16px;
  font-weight: 700;
  color: #0d1b2a;
}

/* recent topics */
.empty-topics {
  font-size: 13px;
  color: #6b7280;
}

.topics-list {
  padding-left: 16px;
  margin: 0;
}

.topics-list li {
  font-size: 13px;
  margin-bottom: 8px;
  color: #0f1724;
}

.topic-time {
  font-size: 11px;
  color: #7b8794;
  margin-top: 4px;
}

/* actions row */
.profile-actions {
  display: flex;
  gap: 8px;
  margin-top: 12px;
}

.refresh-btn,
.logout-btn {
  flex: 1;
  padding: 8px 10px;
  border-radius: 8px;
  cursor: pointer;
  font-weight: 600;
  transition: transform 150ms ease, box-shadow 150ms ease, background 150ms ease;
}

/* refresh button: subtle outlined white */
.refresh-btn {
  background: #ffffff;
  border: 1px solid rgba(9,14,20,0.04);
  color: #0f1724;
}

.refresh-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 20px rgba(2,6,23,0.06);
  background: #f7f9fb;
}

/* logout button: red */
.logout-btn {
  background: #ef4444;
  border: none;
  color: white;
}

.logout-btn:hover {
  transform: translateY(-2px);
  background: #dc2626;
  box-shadow: 0 8px 20px rgba(220,38,38,0.12);
}

/* error text */
.error-text {
  margin-top: 10px;
  color: #b91c1c;
  font-size: 13px;
}

/* -------------------------
   Accessibility & keyboard focus
   ------------------------- */
.profile-button:focus-visible,
.refresh-btn:focus-visible,
.logout-btn:focus-visible {
  outline: 3px solid rgba(124,92,255,0.12);
  outline-offset: 3px;
}

/* make the dropdown closeable with Escape when it has focus */
.profile-dropdown:focus {
  outline: none;
}

/* -------------------------
   Responsive tweaks
   ------------------------- */
@media (max-width: 520px) {
  .profile-dropdown {
    right: 8px;
    left: 8px;
    min-width: auto;
  }
  .profile-info { min-width: 80px; }
}

/* -------------------------
   Reduced motion preference
   ------------------------- */
@media (prefers-reduced-motion: reduce) {
  .profile-button,
  .profile-dropdown,
  .refresh-btn,
  .logout-btn { transition: none !important; animation: none !important; }
  .profile-button::before { transition: none !important; }
}
